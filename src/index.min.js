import{addFilter}from"@wordpress/hooks";import{Fragment}from"@wordpress/element";import{__}from"@wordpress/i18n";import{getSetting}from"@woocommerce/settings";import{CurrencyFactory}from"@woocommerce/currency";import"./index.scss";const CURRENCY=getSetting("currency"),{formatAmount:formatAmount,formatDecimal:formatDecimal}=CurrencyFactory(CURRENCY),addTableColumnProducts=reportTableData=>{if("products"!==reportTableData.endpoint||!reportTableData.items||!reportTableData.items.data||!reportTableData.items.data.length)return reportTableData;const newHeaders=[...reportTableData.headers,{label:__("Cost","woo_custom_fields"),key:"cost",isNumeric:!0},{label:__("Margin","woo_custom_fields"),key:"margin",isNumeric:!0}],newRows=reportTableData.rows.map((row,index)=>{const item=reportTableData.items.data[index];return[...row,{display:formatAmount(item.cost),value:item.cost},{display:formatAmount(item.margin),value:item.margin}]}),newTotals={...reportTableData.totals,markup:reportTableData.totals.margin/reportTableData.totals.cost},newSummary=[...reportTableData.summary,{label:__("Cost","woo_custom_fields"),value:formatAmount(newTotals.cost)},{label:__("Margin","woo_custom_fields"),value:formatAmount(newTotals.margin)}];return reportTableData.headers=newHeaders,reportTableData.rows=newRows,reportTableData.totals=newTotals,reportTableData.summary=newSummary,reportTableData};addFilter("woocommerce_admin_report_table","costreport",addTableColumnProducts);